---
title: "Microsoft 365 auditing solutions"
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
audience: Admin
ms.topic: article
ms.service: O365-seccomp
ms.localizationpriority: medium
ms.collection:
- m365-security-compliance
search.appverid:
- MOE150
- MET150
description: "Learn how to use customer-managed keys to encrypt your organization's audit records." 
---

# Use Customer Key to encrypt audit records

Your Microsoft 365 organization can use [Customer Key](customer-key-overview.md) to encrypt the audit records generated by user and admin activity. Auditing data is always encrypted at rest in the Microsoft 365 service with BitLocker and Distributed Key Manager. Implementing Customer Key provides extra protection by preventing unauthorized systems or Microsoft data center personnel from viewing your auditing data in the auditing pipeline and at rest. Using Customer Key to encrypt your auditing data also helps you meet regulatory or compliance obligations because your organization provides and controls the encryption keys. Microsoft 365 uses these keys to encrypt your organization's auditing data so that only users in your organization can view your audit records because only your organization has the encryption keys.

> [!NOTE]
> Customer Key requires a Microsoft 365 E5 subscription. For more information, see [Microsoft 365 guidance for security & compliance](/office365/servicedescriptions/microsoft-365-service-descriptions/microsoft-365-tenantlevel-services-licensing-guidance/microsoft-365-security-compliance-licensing-guidance#information-protection-customer-key-for-microsoft-365).

## Implement Customer Key for auditing

To implement Customer Key for auditing, you have to create a multi-workload Data Encryption Policy (DEP), which defines the encryption hierarchy. This hierarchy is used by the service to encrypt your auditing data using the two root keys you manage and the availability key that's autogenerated and protected by Microsoft.

Here's a high-level overview of implementing a multi-workload DEP to enable Customer Key for auditing. Use this high-level guidance as a road map and then follow the [step-by-step instructions](customer-key-set-up.md) to implement Customer Key for auditing.

1. Create an Azure Key Vault.

2. Create your Customer Keys in the Azure Key Vault that you created in the previous step.

3. Grant access to the Azure Key Vault to the M365DataAtRestEncryption Azure Active Directory (Azure AD) app. The App ID for this app is c066d759-24ae-40e7-a56f-027002b5d3e4.

4. Configure the following two settings for the Azure Key Vault that you created in step 1. These settings help prevent the inadvertent permanent deletion of your keys.

   - Mark the recovery level for the Azure Key Value subscription as *Do Not Cancel*. 

   - Enable "Soft-Delete"

5. Contact the Microsoft Data Encryption Policy Service (MDEPS) team to onboard MDEPS for your organization.

6. Use the **New-M365DataAtRestEncryptionPolicy** cmdlet in Exchange Online PowerShell to create a multi-workload DEP.

7. Use the **Set-M365DataAtRestEncryptionPolicyAssignment** cmdlet in Exchange Online PowerShell to assign the multi-workload DEP that you created in the previous step to your organization. After you assign the multi-workload DEP, the assignment can't be disabled.

After you complete these steps, all content in your organization, including audit records, will be encrypted using the keys that are specified in the multi-workload DEP that you created in step 5.

## Offboarding

## More info/gotchas
