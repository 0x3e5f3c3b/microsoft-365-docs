---
title: "Use customer-managed keys to encrypt your organization's auditing data"
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
audience: Admin
ms.topic: article
ms.service: O365-seccomp
ms.localizationpriority: medium
ms.collection:
- m365-security-compliance
search.appverid:
- MOE150
- MET150
description: "Learn how to use customer-managed keys to encrypt your organization's audit records." 
---

# Use Customer Key to encrypt audit records

Your Microsoft 365 organization can use [Customer Key](customer-key-overview.md) to encrypt the audit records generated by user and admin activity. Auditing data is always encrypted at rest in the Microsoft 365 service with BitLocker and Distributed Key Manager. Implementing Customer Key provides extra protection by preventing unauthorized systems or Microsoft data center personnel from viewing your auditing data in the auditing pipeline and at rest. Using Customer Key to encrypt your auditing data also helps you meet regulatory or compliance obligations because your organization provides and controls the encryption keys. Microsoft 365 uses these keys to encrypt your organization's auditing data so that only users in your organization can view your audit records because only your organization has the encryption keys.

> [!NOTE]
> Customer Key requires a Microsoft 365 E5 subscription. For more information, see [Microsoft 365 guidance for security & compliance](/office365/servicedescriptions/microsoft-365-service-descriptions/microsoft-365-tenantlevel-services-licensing-guidance/microsoft-365-security-compliance-licensing-guidance#information-protection-customer-key-for-microsoft-365).

## Implement Customer Key for auditing

To implement Customer Key for auditing, you have to create a multi-workload Data Encryption Policy (DEP), which defines the encryption hierarchy. This hierarchy is used by the service to encrypt your auditing data using the two root keys you manage and the availability key that's autogenerated and protected by Microsoft.

Here's a high-level overview of implementing a multi-workload DEP to enable Customer Key for auditing. Use this high-level guidance as a road map and then select the link in each step for detailed step-by-step instructions to implement that step. to set up Customer Key for auditing. After you complete these steps, Microsoft 365 encrypts all data in your organization, including audit records, using the keys identified in the multi-workload DEP that you create in step 7.

1. [Create two Azure subscriptions](customer-key-set-up.md#create-two-new-azure-subscriptions). The Customer Key solution requires two Azure subscriptions. Each subscription will be used to host one key that will be used to create the multi-workload DEP in step 7. Be sure to write-down the Azure subscription ID for each subscription. You'll need these IDs in the next step to request activation of Customer Key.

2. [Submit a request to activate Customer Key for Microsoft 365](customer-key-set-up.md#submit-a-request-to-activate-customer-key-for-office-365). This step uses the FastTrack portal. FastTrack is only used to make it easy to collect your organization and service configuration information that's required to register for Customer Key.

3. [Register Azure subscriptions to use a mandatory retention period](customer-key-set-up.md#register-azure-subscriptions-to-use-a-mandatory-retention-period). This step prevents the immediate and irrevocable cancellation of your Azure subscription. This protective step helps prevent the temporary or permanent loss of the root encryption keys. The mandatory retention period is sometimes referred to as *Do Not Cancel*.

4. [Create an Azure Key Vault in each subscription](customer-key-set-up.md#create-a-premium-azure-key-vault-in-each-subscription) that you created in step 1 and [assign permissions](customer-key-set-up.md#assign-permissions-to-each-key-vault). Additionally, [enable soft delete](customer-key-set-up.md#make-sure-soft-delete-is-enabled-on-your-key-vaults) on your Azure Key Vaults. This also helps prevent the inadvertent deletion of your keys and facilitates the key recovery process.

5. [Create a Customer Key in each key vault that you created in the previous step](customer-key-set-up.md#add-a-key-to-each-key-vault-either-by-creating-or-importing-a-key). You can create new keys or import existing ones.

4. Grant access to the key vaults to the M365DataAtRestEncryption Azure Active Directory (Azure AD) app. The AppID for this app is **c066d759-24ae-40e7-a56f-027002b5d3e4**.


6. Contact the Microsoft Data Encryption Policy Service (MDEPS) team to onboard MDEPS for your organization. If your organization already has MDEPS support for other workloads (such as Exchange or SharePoint) they you only have to request the onboarding for multiple workloads.

7. Use the [New-M365DataAtRestEncryptionPolicy](/powershell/module/exchange/new-m365dataatrestencryptionpolicy) cmdlet in Exchange Online PowerShell to create a multi-workload DEP.

8. Use the [Set-M365DataAtRestEncryptionPolicyAssignment](/powershell/module/exchange/set-m365dataatrestencryptionpolicyassignment) cmdlet in Exchange Online PowerShell to assign the multi-workload DEP that you created in the previous step to your organization. After you assign the multi-workload DEP, you can't disable it.

After you complete these steps, Microsoft 365 encrypts all data in your organization, including audit records, using the keys that are identified in the multi-workload DEP that you created in step 6.

## Offboarding

## More information

- It takes up to 24 hours after you complete the implementation steps to encrypt your organization's auditing records.

- 
